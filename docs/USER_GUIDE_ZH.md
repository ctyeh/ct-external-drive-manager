# CTExternalDisk å¤–æ¥ç¡¬ç¢Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŸºæœ¬è³‡è¨Š

- **ç¡¬ç¢Ÿåç¨±**: CTExternalDisk
- **å®¹é‡**: 3.6TB
- **æª”æ¡ˆç³»çµ±**: Case-sensitive APFS (å·²è§£å¯†)
- **æ›è¼‰è·¯å¾‘**: `/Volumes/CTExternalDisk`
- **UUID**: 3E314969-A8AD-49EA-8743-F773357E61AB
- **è¨­å‚™ç¯€é»**: /dev/disk7s1

---

## ğŸ—‚ï¸ ç›®å‰è³‡æ–™å¤¾çµæ§‹

```
/Volumes/CTExternalDisk/
â”œâ”€â”€ Downloads_Archive/          # åŸ Downloads è³‡æ–™å¤¾å…§å®¹ (610MB)
â”œâ”€â”€ Music_Library/
â”‚   â””â”€â”€ iTunes/                 # iTunes è³‡æ–™å¤¾ (126MB)
â”œâ”€â”€ Pictures_Library/
â”‚   â””â”€â”€ Pictures/               # å®Œæ•´ç…§ç‰‡è³‡æ–™å¤¾ (20GB)
â”‚       â”œâ”€â”€ ç…§ç‰‡ åœ–åº«.photoslibrary  # ä¸»è¦ç…§ç‰‡åœ–åº«
â”‚       â”œâ”€â”€ iPhoto åœ–åº«.migratedphotolibrary
â”‚       â”œâ”€â”€ Photo Booth åœ–åº«/
â”‚       â”œâ”€â”€ Tokyo/              # æ±äº¬ç…§ç‰‡è³‡æ–™å¤¾
â”‚       â”œâ”€â”€ æ‰‹æ©Ÿ/               # æ‰‹æ©Ÿç…§ç‰‡
â”‚       â””â”€â”€ å…¶ä»–ç…§ç‰‡å’Œå½±ç‰‡æª”æ¡ˆ
â””â”€â”€ iOS_Backups/               # (é ç•™çµ¦ iPhone/iPad å‚™ä»½)
```

---

## ğŸ”— ç¬¦è™Ÿé€£çµè¨­å®š

ä»¥ä¸‹è·¯å¾‘å·²å»ºç«‹ç¬¦è™Ÿé€£çµï¼ŒæŒ‡å‘å¤–æ¥ç¡¬ç¢Ÿï¼š

| åŸå§‹è·¯å¾‘ | æŒ‡å‘ä½ç½® | ç‹€æ…‹ |
|---------|---------|------|
| `~/Music/iTunes` | `/Volumes/CTExternalDisk/Music_Library/iTunes` | âœ… å·²è¨­å®š |

---

## ğŸ” ç¡¬ç¢Ÿæ›è¼‰èˆ‡è§£é–

### ğŸ›¡ï¸ ä¼‘çœ å®‰å…¨æ™ºèƒ½è‡ªå‹•æ›è¼‰ç³»çµ± (æœ€æ–°ç‰ˆ v2.0) ğŸ”„
**å·²é…ç½®å®Œæ•´çš„ä¼‘çœ å®‰å…¨è‡ªå‹•æ›è¼‰è§£æ±ºæ–¹æ¡ˆï¼Œå®Œç¾æ”¯æ´ä¼‘çœ èˆ‡é‡å•Ÿï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œï¼**

#### ğŸš€ ç³»çµ±æ¶æ§‹ (å·²å‡ç´š)
- **é›™æœå‹™è¨­è¨ˆ**: ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™ï¼Œç¢ºä¿æ‰€æœ‰æƒ…æ³ä¸‹éƒ½èƒ½è‡ªå‹•æ›è¼‰
- **ä¸»æœå‹™ (LaunchAgent)**: æ¯30ç§’è‡ªå‹•æª¢æ¸¬ä¸¦æ›è¼‰ç¡¬ç¢Ÿï¼Œä½¿ç”¨ä¼‘çœ å®‰å…¨è…³æœ¬
- **é–‹æ©Ÿæœå‹™ (Boot Service)**: ç™»å…¥æ™‚ç«‹å³å˜—è©¦æ›è¼‰ï¼Œè™•ç†é‡å•Ÿ/ä¼‘çœ æƒ…æ³
- **ä¼‘çœ å®‰å…¨è™•ç†**: è‡ªå‹•åœ¨ä¼‘çœ å‰å®‰å…¨å½ˆå‡ºï¼Œå–šé†’å¾Œè‡ªå‹•é‡æ–°æ›è¼‰
- **ç„¡å¯†ç¢¼ sudo**: é…ç½®å®‰å…¨çš„ sudoers è¦å‰‡ï¼Œå¯¦ç¾å…¨è‡ªå‹•æ“ä½œ
- **ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬**: å°ˆé–€è™•ç†ä¼‘çœ æ¢å¾©çš„å¢å¼·æ›è¼‰è…³æœ¬ (NEW!)
- **ä¼‘çœ åµæ¸¬ç³»çµ±**: è‡ªå‹•åµæ¸¬ä¼‘çœ æ¢å¾©æƒ…æ³ï¼Œèª¿æ•´æ›è¼‰ç­–ç•¥ (NEW!)
- **å¤šé‡æ›è¼‰æ–¹æ³•**: diskutil â†’ sudo diskutil â†’ sudo mount ä¸‰é‡å‚™æ´ (NEW!)
- **å¢å¼·æ—¥èªŒç³»çµ±**: è¨˜éŒ„æ‰€æœ‰æ›è¼‰å˜—è©¦ã€ç³»çµ±ç‹€æ…‹å’Œå•é¡Œè¨ºæ–·
- **å®Œæ•´ç®¡ç†å·¥å…·**: å‘½ä»¤è¡Œç®¡ç†ä»‹é¢ï¼Œæ”¯æ´æ¸¬è©¦å’Œæ•…éšœæ’é™¤

#### ğŸ›¡ï¸ ä¼‘çœ å®‰å…¨ç‰¹è‰² (ENHANCED!)
- **âœ… ä¼‘çœ å‰è‡ªå‹•å½ˆå‡º**: ç³»çµ±ä¼‘çœ å‰è‡ªå‹•å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿï¼Œé˜²æ­¢æª”æ¡ˆç³»çµ±æå£
- **âœ… ä¼‘çœ æ¢å¾©åµæ¸¬**: è‡ªå‹•åµæ¸¬ç³»çµ±å¾ä¼‘çœ ä¸­æ¢å¾©ï¼Œå•Ÿç”¨å¢å¼·æ›è¼‰æ¨¡å¼ (NEW!)
- **âœ… å»¶é•·ç­‰å¾…æ™‚é–“**: ä¼‘çœ å¾Œçµ¦äºˆ USB è¨­å‚™æ›´å¤šæ™‚é–“é‡æ–°åˆå§‹åŒ– (NEW!)
- **âœ… å¤šé‡æ›è¼‰å‚™æ´**: ä¸‰ç¨®ä¸åŒæ›è¼‰æ–¹æ³•ç¢ºä¿æˆåŠŸç‡ (NEW!)
- **âœ… è‡ªå‹•ä¿®å¾©æ©Ÿåˆ¶**: ä¼‘çœ å¾Œè‡ªå‹•æª¢æŸ¥ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ (NEW!)
- **âœ… è‡ªå‹•æ¬Šé™ä¿®å¾©**: æ¯æ¬¡æ›è¼‰è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ç‚ºç”¨æˆ¶æ‰€æœ‰ (NEW!)
- **âœ… å¯«å…¥æ¬Šé™ä¿è­‰**: ç¢ºä¿ç”¨æˆ¶å°å¤–æ¥ç¡¬ç¢Ÿå…·æœ‰å®Œæ•´è®€å¯«æ¬Šé™ (NEW!)
- **âœ… å–šé†’å¾Œè‡ªå‹•æ›è¼‰**: ç³»çµ±å–šé†’å¾Œè‡ªå‹•é‡æ–°æ›è¼‰ç¡¬ç¢Ÿï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ
- **âœ… ç„¡å¯†ç¢¼æ“ä½œ**: ä½¿ç”¨å®‰å…¨çš„ sudoers è¦å‰‡ï¼Œä¼‘çœ è™•ç†å®Œå…¨è‡ªå‹•åŒ–
- **âœ… è¨­å‚™ç¯€é»è¿½è¹¤**: è™•ç†ä¼‘çœ å¾Œè¨­å‚™ç¯€é»è®Šæ›´ (å¦‚ /dev/disk7s1 â†’ /dev/disk8s1)
- **âœ… iTunes ç¬¦è™Ÿé€£çµç¶­è­·**: è‡ªå‹•é©—è­‰ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
- **âœ… è©³ç´°ä¼‘çœ æ—¥èªŒ**: å°ˆé–€çš„ä¼‘çœ /å–šé†’æ“ä½œæ—¥èªŒè¨˜éŒ„

#### ğŸ”„ ä¼‘çœ èˆ‡é‡å•Ÿæ”¯æ´ç‰¹è‰²
- **âœ… ç³»çµ±ç‹€æ…‹åµæ¸¬**: è‡ªå‹•åµæ¸¬é‡å•Ÿå’Œä¼‘çœ å–šé†’æƒ…æ³
- **âœ… å‹•æ…‹è¨­å‚™åµæ¸¬**: è™•ç†ä¼‘çœ å¾Œè¨­å‚™ç¯€é»è®Šæ›´ (å¦‚ /dev/disk7s1 â†’ /dev/disk8s1)
- **âœ… æ™ºèƒ½ç­‰å¾…æ©Ÿåˆ¶**: ç­‰å¾…ç³»çµ±å’Œ USB è¨­å‚™å®Œå…¨å°±ç·’å¾Œå†å˜—è©¦æ›è¼‰
- **âœ… å¤šé‡æ›è¼‰æ–¹æ³•**: diskutil mount â†’ UUID mount â†’ sudo mount å‚™æ´
- **âœ… é‡è©¦æ©Ÿåˆ¶**: 3æ¬¡é‡è©¦ï¼Œæ¯æ¬¡é–“éš”5ç§’ï¼Œæé«˜æˆåŠŸç‡
- **âœ… ç¬¦è™Ÿé€£çµè‡ªå‹•ä¿®å¾©**: è‡ªå‹•é©—è­‰ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
- **âœ… é–å®šæª”æ¡ˆé˜²è¡çª**: é˜²æ­¢å¤šå€‹æ›è¼‰å¯¦ä¾‹åŒæ™‚åŸ·è¡Œ
- **âœ… é–‹æ©Ÿç«‹å³æ›è¼‰**: ç™»å…¥å¾Œæœ€å¤šç­‰å¾…2åˆ†é˜è‡ªå‹•æ›è¼‰ç¡¬ç¢Ÿ

#### ğŸ› ï¸ ç®¡ç†æŒ‡ä»¤

**ä¸»è¦æŒ‡ä»¤: `ctdisk`**
```bash
ctdisk mount     # æ‰‹å‹•æ›è¼‰ç¡¬ç¢Ÿ
ctdisk unmount   # å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿ  
ctdisk status    # æª¢æŸ¥æ›è¼‰ç‹€æ…‹å’Œç©ºé–“
ctdisk check     # é©—è­‰ç¡¬ç¢Ÿå¥åº·ç‹€æ…‹
```

**ä¼‘çœ å®‰å…¨æŒ‡ä»¤: `ctdisk-hibernation-safe` (ENHANCED!)**
```bash
ctdisk-hibernation-safe mount           # æ‰‹å‹•æ›è¼‰ç¡¬ç¢Ÿ
ctdisk-hibernation-safe unmount         # å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿ
ctdisk-hibernation-safe status          # æª¢æŸ¥æ›è¼‰ç‹€æ…‹å’Œç©ºé–“
ctdisk-hibernation-safe sleep-safe      # æ‰‹å‹•å®‰å…¨å½ˆå‡º (ä¼‘çœ å‰)
ctdisk-hibernation-safe wake-mount      # æ‰‹å‹•é‡æ–°æ›è¼‰ (å–šé†’å¾Œ)
ctdisk-hibernation-safe test-sleep      # æ¸¬è©¦ä¼‘çœ å®‰å…¨å½ˆå‡º
ctdisk-hibernation-safe test-wake       # æ¸¬è©¦å–šé†’é‡æ–°æ›è¼‰
ctdisk-hibernation-safe check-sudo      # æª¢æŸ¥ç„¡å¯†ç¢¼ sudo é…ç½®
ctdisk-hibernation-safe setup-hibernation   # é©—è­‰ä¼‘çœ å®‰å…¨è¨­å®š
```

**ä¼‘çœ æ¢å¾©æ¸¬è©¦æŒ‡ä»¤: `test-hibernation-recovery.sh` (NEW!)**
```bash
test-hibernation-recovery.sh            # å®Œæ•´ä¼‘çœ æ¢å¾©æ¸¬è©¦
# è‡ªå‹•åŸ·è¡Œï¼šå¸è¼‰ â†’ ç­‰å¾…è‡ªå‹•æ›è¼‰ â†’ é©—è­‰åŠŸèƒ½ â†’ é¡¯ç¤ºçµæœ
```

**æ¬Šé™ä¿®å¾©æŒ‡ä»¤: `fix-ctdisk-ownership.sh` (NEW!)**
```bash
fix-ctdisk-ownership.sh                 # ä¿®å¾© CTExternalDisk æ¬Šé™å•é¡Œ
# è‡ªå‹•æª¢æŸ¥ä¸¦ä¿®å¾©æ›è¼‰é»æ¬Šé™ï¼Œç¢ºä¿ç”¨æˆ¶æ“æœ‰å®Œæ•´è®€å¯«æ¬Šé™
```

**å¢å¼·è¨­å®šæŒ‡ä»¤: `ctdisk-setup`**
```bash
ctdisk-setup enable     # å•Ÿç”¨å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰æœå‹™
ctdisk-setup disable    # åœç”¨è‡ªå‹•æ›è¼‰æœå‹™
ctdisk-setup restart    # é‡å•Ÿè‡ªå‹•æ›è¼‰æœå‹™
ctdisk-setup status     # æª¢æŸ¥æœå‹™ç‹€æ…‹ (é¡¯ç¤ºä¸»æœå‹™+é–‹æ©Ÿæœå‹™)
ctdisk-setup logs       # æŸ¥çœ‹è©³ç´°æ›è¼‰æ—¥èªŒ
ctdisk-setup test       # æ¸¬è©¦ä¸»æ›è¼‰è…³æœ¬
ctdisk-setup test-boot  # æ¸¬è©¦é–‹æ©Ÿæ›è¼‰è…³æœ¬
```

**å¿«é€Ÿåˆ¥å**
```bash
mount-ct      # å¿«é€Ÿæ›è¼‰
unmount-ct    # å¿«é€Ÿå¸è¼‰
status-ct     # å¿«é€Ÿç‹€æ…‹æª¢æŸ¥
```

#### ğŸš€ ä½¿ç”¨æ–¹å¼
1. **å•Ÿç”¨å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰**: `ctdisk-setup enable`
2. **æª¢æŸ¥æœå‹™ç‹€æ…‹**: `ctdisk-setup status`
3. **æŸ¥çœ‹è©³ç´°æ—¥èªŒ**: `ctdisk-setup logs`
4. **æ¸¬è©¦ä¼‘çœ æ¢å¾©**: `ctdisk-setup test-boot`
5. **è¨­å®šä¼‘çœ å®‰å…¨**: `ctdisk-hibernation-safe setup-hibernation`
6. **æ¸¬è©¦å®Œæ•´ä¼‘çœ é€±æœŸ**: `ctdisk-hibernation-safe test-sleep && ctdisk-hibernation-safe test-wake`
7. **æ¸¬è©¦ä¼‘çœ æ¢å¾©**: `test-hibernation-recovery.sh` (NEW!)
8. **ä¿®å¾©æ¬Šé™å•é¡Œ**: `fix-ctdisk-ownership.sh` (NEW!)

#### ğŸ“‹ ç³»çµ±æª”æ¡ˆä½ç½®
- **ä¸»æœå‹™ LaunchAgent**: `~/Library/LaunchAgents/com.user.ctexternaldisk.automount.plist`
- **é–‹æ©Ÿæœå‹™ LaunchAgent**: `~/Library/LaunchAgents/com.user.ctexternaldisk.bootmount.plist`
- **åŸå§‹æ›è¼‰è…³æœ¬**: `~/.local/bin/mount-ctexternaldisk.sh`
- **ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬**: `~/.local/bin/mount-ctexternaldisk-hibernation-safe.sh` (NEW!)
- **é–‹æ©Ÿæ›è¼‰è…³æœ¬**: `~/.local/bin/ctdisk-boot-mount.sh`
- **ä¼‘çœ å®‰å…¨è™•ç†è…³æœ¬**: `~/.local/bin/ctdisk-sleepwatcher-v2.sh`
- **ç®¡ç†å·¥å…·**: `~/.local/bin/ctdisk`
- **ä¼‘çœ å®‰å…¨ç®¡ç†å·¥å…·**: `~/.local/bin/ctdisk-hibernation-safe`
- **ä¼‘çœ æ¢å¾©æ¸¬è©¦å·¥å…·**: `~/.local/bin/test-hibernation-recovery.sh` (NEW!)
- **æ¬Šé™ä¿®å¾©å·¥å…·**: `~/.local/bin/fix-ctdisk-ownership.sh` (NEW!)
- **è¨­å®šå·¥å…·**: `~/.local/bin/ctdisk-setup`
- **ç„¡å¯†ç¢¼ sudo è¨­å®š**: `/etc/sudoers.d/ctexternaldisk-mount`
- **ä¸»è¦æ—¥èªŒæª”æ¡ˆ**: `~/.local/log/ctexternaldisk-mount.log`
- **ä¼‘çœ å®‰å…¨æ›è¼‰æ—¥èªŒ**: `~/.local/log/ctexternaldisk-mount-hibernation-safe.log` (NEW!)
- **éŒ¯èª¤æ—¥èªŒ**: `~/.local/log/ctexternaldisk-mount.error.log`
- **ä¼‘çœ å®‰å…¨æ—¥èªŒ**: `~/.local/log/ctexternaldisk-sleepwake-v2.log`

#### âš™ï¸ å¢å¼·ç‰ˆå·¥ä½œåŸç†
- **ä¸»æœå‹™**: æ¯30ç§’æª¢æŸ¥ç¡¬ç¢Ÿæ˜¯å¦é€£æ¥ä½†æœªæ›è¼‰ï¼Œä½¿ç”¨ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬ (ENHANCED!)
- **é–‹æ©Ÿæœå‹™**: ç™»å…¥æ™‚ç«‹å³åŸ·è¡Œï¼Œç­‰å¾…ç¡¬ç¢Ÿå‡ºç¾ä¸¦æ›è¼‰
- **ä¼‘çœ å®‰å…¨è™•ç†**: ç³»çµ±ä¼‘çœ å‰è‡ªå‹•å®‰å…¨å½ˆå‡ºï¼Œå–šé†’å¾Œè‡ªå‹•é‡æ–°æ›è¼‰
- **ç„¡å¯†ç¢¼ sudo**: ä½¿ç”¨å®‰å…¨çš„ sudoers è¦å‰‡ï¼Œå…è¨±ç‰¹å®šæ›è¼‰æŒ‡ä»¤ç„¡éœ€å¯†ç¢¼
- **ä¼‘çœ åµæ¸¬æ©Ÿåˆ¶**: è‡ªå‹•åµæ¸¬ç³»çµ±å¾ä¼‘çœ ä¸­æ¢å¾©ï¼Œå•Ÿç”¨å¢å¼·æ›è¼‰æ¨¡å¼ (NEW!)
- **æ™ºèƒ½ç­‰å¾…ç­–ç•¥**: ä¼‘çœ å¾Œå»¶é•·ç­‰å¾…æ™‚é–“ï¼Œç¢ºä¿ USB è¨­å‚™å®Œå…¨å°±ç·’ (NEW!)
- **å¤šé‡æ›è¼‰æ–¹æ³•**: diskutil â†’ sudo diskutil â†’ sudo mount ä¸‰é‡å‚™æ´ (NEW!)
- **è‡ªå‹•æ¬Šé™ä¿®å¾©**: æ¯æ¬¡æ›è¼‰è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ç‚ºç”¨æˆ¶æ‰€æœ‰ (NEW!)
- **ç³»çµ±ç‹€æ…‹æ„ŸçŸ¥**: åµæ¸¬é‡å•Ÿ/ä¼‘çœ ï¼Œèª¿æ•´ç­‰å¾…æ™‚é–“å’Œç­–ç•¥
- **å‹•æ…‹è¨­å‚™è¿½è¹¤**: è‡ªå‹•å°‹æ‰¾æ­£ç¢ºçš„è¨­å‚™ç¯€é»ï¼Œè™•ç†è®Šæ›´
- **ç¬¦è™Ÿé€£çµç¶­è­·**: æ¯æ¬¡æ›è¼‰å¾Œé©—è­‰ä¸¦ä¿®å¾©ç¬¦è™Ÿé€£çµ
- **è©³ç´°æ—¥èªŒè¨˜éŒ„**: è¨˜éŒ„æ‰€æœ‰æ“ä½œä»¥ä¾¿æ•…éšœæ’é™¤ï¼ŒåŒ…å«ä¼‘çœ æ¢å¾©äº‹ä»¶ (ENHANCED!)
- **é˜²è¡çªæ©Ÿåˆ¶**: ä½¿ç”¨é–å®šæª”æ¡ˆé˜²æ­¢å¤šå€‹å¯¦ä¾‹åŒæ™‚åŸ·è¡Œ

#### ğŸ¯ ä¼‘çœ èˆ‡é‡å•Ÿå®Œç¾æ”¯æ´
**ç³»çµ±é‡å•Ÿå¾Œ:**
1. é–‹æ©Ÿæœå‹™è‡ªå‹•å•Ÿå‹•ï¼Œç­‰å¾…ç¡¬ç¢Ÿå‡ºç¾
2. åµæ¸¬åˆ°ç¡¬ç¢Ÿå¾Œç«‹å³å˜—è©¦æ›è¼‰
3. é©—è­‰ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
4. ä¸»æœå‹™æ¥æ‰‹æŒçºŒç›£æ§

**ä¼‘çœ å–šé†’å¾Œ (ENHANCED!):**
1. ä¼‘çœ å‰è‡ªå‹•å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿï¼Œé˜²æ­¢æª”æ¡ˆç³»çµ±æå£
2. ç³»çµ±åµæ¸¬åˆ°å–šé†’ç‹€æ…‹å’Œä¼‘çœ æ¢å¾©æƒ…æ³ (NEW!)
3. å»¶é•·ç­‰å¾…æ™‚é–“ï¼Œç¢ºä¿ USB è¨­å‚™é‡æ–°è­˜åˆ¥ (NEW!)
4. å‹•æ…‹å°‹æ‰¾è¨­å‚™ç¯€é» (å¯èƒ½å·²è®Šæ›´)
5. ä½¿ç”¨ä¸‰é‡æ›è¼‰æ–¹æ³•å˜—è©¦æ›è¼‰ (ç„¡éœ€å¯†ç¢¼) (ENHANCED!)
6. è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ç‚ºç”¨æˆ¶æ‰€æœ‰ (NEW!)
7. è‡ªå‹•ä¿®å¾©ç¬¦è™Ÿé€£çµå’Œé©—è­‰åŠŸèƒ½ (ENHANCED!)
8. è¨˜éŒ„ä¼‘çœ æ¢å¾©äº‹ä»¶åˆ°å°ˆç”¨æ—¥èªŒ (NEW!)

**çµæœ**: ç„¡è«–ä»»ä½•æƒ…æ³ï¼Œç¡¬ç¢Ÿéƒ½æœƒè‡ªå‹•æ›è¼‰ï¼Œæ¬Šé™æ­£ç¢ºï¼ŒiTunes ç«‹å³å¯ç”¨ï¼ ğŸ‰

### å‚³çµ±è‡ªå‹•æ›è¼‰è¨­å®š (å‚™ç”¨)
- **fstab è¨­å®š**: å·²é…ç½®é–‹æ©Ÿè‡ªå‹•æ›è¼‰
- **LaunchDaemon**: å·²å»ºç«‹å‚™ç”¨è‡ªå‹•æ›è¼‰æœå‹™
- **æ³¨æ„**: ç”±æ–¼ç¡¬ç¢ŸåŠ å¯†ï¼Œå¯èƒ½éœ€è¦æ‰‹å‹•è¼¸å…¥å¯†ç¢¼

### æ‰‹å‹•æ›è¼‰æŒ‡ä»¤

**æ¨è–¦æ–¹æ³•ï¼ˆè§£å¯†å¾Œæœ€å¯é ï¼‰ï¼š**
```bash
# å»ºç«‹æ›è¼‰é»ä¸¦æ›è¼‰ï¼ˆéœ€è¦ sudo æ¬Šé™ï¼‰
sudo mkdir -p /Volumes/CTExternalDisk
sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk

# å¸è¼‰ç¡¬ç¢Ÿ
diskutil eject /Volumes/CTExternalDisk
```

**å‚™ç”¨æ–¹æ³•ï¼š**
```bash
# ä½¿ç”¨ diskutil æ›è¼‰ï¼ˆæœ‰æ™‚å¯èƒ½å¤±æ•—ï¼‰
sudo diskutil mount /dev/disk7s1

# æˆ–ä½¿ç”¨ UUID æ›è¼‰
diskutil mount 3E314969-A8AD-49EA-8743-F773357E61AB
```

### æª¢æŸ¥ç¡¬ç¢Ÿç‹€æ…‹
```bash
# æª¢æŸ¥æ˜¯å¦å·²æ›è¼‰
ls /Volumes/ | grep CTExternalDisk

# æª¢æŸ¥ç¡¬ç¢Ÿè³‡è¨Š
diskutil info /Volumes/CTExternalDisk

# æª¢æŸ¥å¯ç”¨ç©ºé–“
df -h /Volumes/CTExternalDisk
```

---

## ğŸ“¸ ç…§ç‰‡ç®¡ç†ç­–ç•¥

### ç³»çµ±è¨­å®š
- **ç³»çµ±ç…§ç‰‡åœ–åº«**: `~/Pictures/ç…§ç‰‡åœ–åº«.photoslibrary` (å…§å»ºå„²å­˜)
- **æ­·å²ç…§ç‰‡åœ–åº«**: `/Volumes/CTExternalDisk/Pictures_Library/Pictures/ç…§ç‰‡ åœ–åº«.photoslibrary`
- **iCloud åŒæ­¥**: åŒæ­¥åˆ°å…§å»ºå„²å­˜çš„ç³»çµ±åœ–åº«

### ä½¿ç”¨å»ºè­°
1. **æ–°ç…§ç‰‡**: è‡ªå‹•åŒæ­¥åˆ°å…§å»ºå„²å­˜
2. **èˆŠç…§ç‰‡**: ä¿å­˜åœ¨å¤–æ¥ç¡¬ç¢Ÿ
3. **å¤§å‹å½±ç‰‡**: å»ºè­°å­˜æ”¾åœ¨å¤–æ¥ç¡¬ç¢Ÿ
4. **å®šæœŸæ•´ç†**: å°‡èˆŠç…§ç‰‡å¾ç³»çµ±åœ–åº«ç§»åˆ°å¤–æ¥ç¡¬ç¢Ÿ

### åˆ‡æ›ç…§ç‰‡åœ–åº«
```bash
# æŒ‰ä½ Option éµé–‹å•Ÿç…§ç‰‡ appï¼Œé¸æ“‡è¦ä½¿ç”¨çš„åœ–åº«
# å…§å»ºåœ–åº«: ~/Pictures/ç…§ç‰‡åœ–åº«.photoslibrary
# å¤–æ¥åœ–åº«: /Volumes/CTExternalDisk/Pictures_Library/Pictures/ç…§ç‰‡ åœ–åº«.photoslibrary
```

---

## ğŸµ éŸ³æ¨‚ç®¡ç†

### iTunes è³‡æ–™å¤¾
- **ä½ç½®**: `/Volumes/CTExternalDisk/Music_Library/iTunes`
- **ç¬¦è™Ÿé€£çµ**: `~/Music/iTunes` â†’ å¤–æ¥ç¡¬ç¢Ÿ
- **å¤§å°**: 126MB

### ä½¿ç”¨æ–¹å¼
- iTunes æˆ– Music app æœƒè‡ªå‹•ä½¿ç”¨ç¬¦è™Ÿé€£çµå­˜å–å¤–æ¥ç¡¬ç¢Ÿä¸Šçš„éŸ³æ¨‚
- å¦‚æœç¡¬ç¢Ÿæœªé€£æ¥ï¼ŒéŸ³æ¨‚ app å¯èƒ½ç„¡æ³•å­˜å–éŸ³æ¨‚æª”æ¡ˆ

---

## ğŸ“ æª”æ¡ˆç®¡ç†æœ€ä½³å¯¦è¸

### å»ºè­°çš„è³‡æ–™å¤¾çµæ§‹
```
/Volumes/CTExternalDisk/
â”œâ”€â”€ Archives/              # å°å­˜æª”æ¡ˆ
â”œâ”€â”€ Projects/              # å¤§å‹å°ˆæ¡ˆæª”æ¡ˆ
â”œâ”€â”€ Media/                 # å½±ç‰‡ã€éŸ³æ¨‚ç­‰åª’é«”æª”æ¡ˆ
â”œâ”€â”€ Backups/               # å„ç¨®å‚™ä»½
â””â”€â”€ Temp/                  # æš«å­˜æª”æ¡ˆ
```

### å®šæœŸç¶­è­·
```bash
# æª¢æŸ¥ç¡¬ç¢Ÿå¥åº·ç‹€æ…‹
diskutil verifyVolume /Volumes/CTExternalDisk

# ä¿®å¾©æ¬Šé™ï¼ˆå¦‚éœ€è¦ï¼‰
diskutil repairPermissions /Volumes/CTExternalDisk

# æ¸…ç†æš«å­˜æª”æ¡ˆ
find /Volumes/CTExternalDisk -name ".DS_Store" -delete
```

---

## âš ï¸ æ³¨æ„äº‹é …èˆ‡é™åˆ¶

### ç¡¬ç¢Ÿé€£æ¥
- **å¿…é ˆé€£æ¥**: ç¬¦è™Ÿé€£çµçš„æª”æ¡ˆéœ€è¦ç¡¬ç¢Ÿé€£æ¥æ‰èƒ½å­˜å–
- **å®‰å…¨ç§»é™¤**: ä½¿ç”¨å‰å‹™å¿…ç¢ºä¿ç¡¬ç¢Ÿå·²æ­£ç¢ºæ›è¼‰
- **å½ˆå‡ºç¡¬ç¢Ÿ**: ä½¿ç”¨å®Œç•¢å¾Œè«‹æ­£ç¢ºå½ˆå‡ºç¡¬ç¢Ÿ
- **æ›è¼‰å•é¡Œ**: å¦‚æœ `diskutil mount` å¤±æ•—ï¼Œè«‹ä½¿ç”¨ `sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk`

### æ•ˆèƒ½è€ƒé‡
- **USB ä»‹é¢**: å»ºè­°ä½¿ç”¨ USB 3.0 æˆ–æ›´å¿«çš„ä»‹é¢
- **æª”æ¡ˆå­˜å–**: å¤–æ¥ç¡¬ç¢Ÿçš„å­˜å–é€Ÿåº¦æ¯”å…§å»ºå„²å­˜æ…¢
- **å¤§å‹æª”æ¡ˆ**: é©åˆå„²å­˜ä¸å¸¸å­˜å–çš„å¤§å‹æª”æ¡ˆ

### å‚™ä»½å»ºè­°
- **é‡è¦è³‡æ–™**: å»ºè­°åŒæ™‚å‚™ä»½åˆ° Time Machine å’Œé›²ç«¯
- **ç¡¬ç¢Ÿæ•…éšœ**: å¤–æ¥ç¡¬ç¢Ÿæœ‰æ•…éšœé¢¨éšªï¼Œé‡è¦è³‡æ–™è«‹å¤šé‡å‚™ä»½
- **å®šæœŸæª¢æŸ¥**: å®šæœŸæª¢æŸ¥ç¡¬ç¢Ÿå¥åº·ç‹€æ…‹

---

## ğŸ”§ æ•…éšœæ’é™¤

### ğŸ¤– ä¼‘çœ å®‰å…¨è‡ªå‹•æ›è¼‰ç³»çµ±æ•…éšœæ’é™¤ (ENHANCED!)

**æª¢æŸ¥ä¼‘çœ å®‰å…¨ç³»çµ±ç‹€æ…‹**
```bash
# æª¢æŸ¥ç„¡å¯†ç¢¼ sudo é…ç½®
ctdisk-hibernation-safe check-sudo

# æª¢æŸ¥é›™æœå‹™ç‹€æ…‹ (ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™)
ctdisk-setup status

# æŸ¥çœ‹ä¼‘çœ å®‰å…¨æ—¥èªŒ
tail -f ~/.local/log/ctexternaldisk-sleepwake-v2.log

# æŸ¥çœ‹ä¼‘çœ å®‰å…¨æ›è¼‰æ—¥èªŒ (NEW!)
tail -f ~/.local/log/ctexternaldisk-mount-hibernation-safe.log

# æ¸¬è©¦å®Œæ•´ä¼‘çœ é€±æœŸ
ctdisk-hibernation-safe test-sleep
ctdisk-hibernation-safe test-wake

# æ¸¬è©¦ä¼‘çœ æ¢å¾©ç³»çµ± (NEW!)
test-hibernation-recovery.sh
```

**é‡æ–°è¨­å®šä¼‘çœ å®‰å…¨ç³»çµ±**
```bash
# é‡æ–°è¨­å®šç„¡å¯†ç¢¼ sudo (å¦‚æœæœ‰å•é¡Œ)
/Users/ctyeh/.local/bin/setup-sudoless-mount.sh

# é‡å•Ÿæ‰€æœ‰æœå‹™ (ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™)
ctdisk-setup restart

# é©—è­‰ä¼‘çœ å®‰å…¨è¨­å®š
ctdisk-hibernation-safe setup-hibernation

# æ‰‹å‹•æ¸¬è©¦ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬ (NEW!)
/Users/ctyeh/.local/bin/mount-ctexternaldisk-hibernation-safe.sh
```

**æ‰‹å‹•ä¼‘çœ å®‰å…¨æ“ä½œ (å¦‚æœè‡ªå‹•ç³»çµ±å¤±æ•ˆ)**
```bash
# ä¼‘çœ å‰æ‰‹å‹•å®‰å…¨å½ˆå‡º
ctdisk-hibernation-safe sleep-safe

# å–šé†’å¾Œæ‰‹å‹•é‡æ–°æ›è¼‰
ctdisk-hibernation-safe wake-mount

# æª¢æŸ¥æ›è¼‰ç‹€æ…‹
ctdisk-hibernation-safe status

# æ‰‹å‹•æ¸¬è©¦å¤šé‡æ›è¼‰æ–¹æ³• (NEW!)
sudo diskutil mount disk7s1  # æ–¹æ³•1
sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk  # æ–¹æ³•2
```

**ä¼‘çœ /é‡å•Ÿå¾Œæ›è¼‰å•é¡Œè¨ºæ–· (ENHANCED!)**
```bash
# 1. æª¢æŸ¥ç³»çµ±æ˜¯å¦åµæ¸¬åˆ°ç¡¬ç¢Ÿ
diskutil list | grep CTExternalDisk

# 2. æª¢æŸ¥è¨­å‚™ç¯€é»æ˜¯å¦å­˜åœ¨
ls -la /dev/disk*s1 | grep CTExternalDisk

# 3. æª¢æŸ¥ä¼‘çœ å®‰å…¨æ—¥èªŒä¸­çš„ä¼‘çœ /é‡å•Ÿäº‹ä»¶
ctdisk-hibernation-safe check-sudo
tail -20 ~/.local/log/ctexternaldisk-sleepwake-v2.log

# 4. æª¢æŸ¥ä¼‘çœ å®‰å…¨æ›è¼‰æ—¥èªŒ (NEW!)
tail -20 ~/.local/log/ctexternaldisk-mount-hibernation-safe.log
grep "HIBERNATION" ~/.local/log/ctexternaldisk-mount-hibernation-safe.log

# 5. æ‰‹å‹•è§¸ç™¼å–šé†’æ›è¼‰è…³æœ¬
ctdisk-hibernation-safe wake-mount

# 6. æ‰‹å‹•åŸ·è¡Œä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬ (NEW!)
/Users/ctyeh/.local/bin/mount-ctexternaldisk-hibernation-safe.sh

# 7. æª¢æŸ¥ç¬¦è™Ÿé€£çµç‹€æ…‹
ls -la ~/Music/iTunes

# 8. æ¸¬è©¦å®Œæ•´ä¼‘çœ æ¢å¾©æµç¨‹ (NEW!)
test-hibernation-recovery.sh
```

**æ¬Šé™å•é¡Œè¨ºæ–·èˆ‡ä¿®å¾© (NEW!)**
```bash
# 1. æª¢æŸ¥æ›è¼‰é»æ¬Šé™
ls -ld /Volumes/CTExternalDisk

# 2. æª¢æŸ¥ç•¶å‰ç”¨æˆ¶æ˜¯å¦ç‚ºæ“æœ‰è€…
stat -f "%Su:%Sg" /Volumes/CTExternalDisk

# 3. æ¸¬è©¦å¯«å…¥æ¬Šé™
touch /Volumes/CTExternalDisk/test_write.txt && rm /Volumes/CTExternalDisk/test_write.txt

# 4. è‡ªå‹•ä¿®å¾©æ¬Šé™å•é¡Œ
fix-ctdisk-ownership.sh

# 5. æ‰‹å‹•ä¿®å¾©æ¬Šé™ (å¦‚æœè‡ªå‹•ä¿®å¾©å¤±æ•—)
sudo chown ctyeh:staff /Volumes/CTExternalDisk

# 6. é©—è­‰æ¬Šé™ä¿®å¾©çµæœ
ls -ld /Volumes/CTExternalDisk
touch /Volumes/CTExternalDisk/test_write.txt && rm /Volumes/CTExternalDisk/test_write.txt
```

**ç„¡å¯†ç¢¼ sudo å•é¡Œè¨ºæ–·**
```bash
# æª¢æŸ¥ sudoers æª”æ¡ˆæ˜¯å¦å­˜åœ¨
sudo ls -la /etc/sudoers.d/ctexternaldisk-mount

# æ¸¬è©¦ç„¡å¯†ç¢¼ sudo
sudo -n mkdir -p /Volumes/CTExternalDisk

# é‡æ–°è¨­å®šç„¡å¯†ç¢¼ sudo
/Users/ctyeh/.local/bin/setup-sudoless-mount.sh
```

### ğŸ¤– å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰ç³»çµ±æ•…éšœæ’é™¤

**æª¢æŸ¥å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰æœå‹™ç‹€æ…‹**
```bash
# æª¢æŸ¥é›™æœå‹™ç‹€æ…‹ (ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™)
ctdisk-setup status

# æŸ¥çœ‹è©³ç´°æ—¥èªŒ (åŒ…å«ä¼‘çœ /é‡å•Ÿäº‹ä»¶)
ctdisk-setup logs

# æ¸¬è©¦ä¸»æ›è¼‰è…³æœ¬
ctdisk-setup test

# æ¸¬è©¦é–‹æ©Ÿæ›è¼‰è…³æœ¬ (ä¼‘çœ /é‡å•Ÿæƒ…æ³)
ctdisk-setup test-boot
```

**é‡æ–°å•Ÿå‹•å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰æœå‹™**
```bash
# é‡å•Ÿæ‰€æœ‰æœå‹™ (ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™)
ctdisk-setup restart

# æˆ–åˆ†åˆ¥é‡æ–°å•Ÿç”¨
ctdisk-setup disable
ctdisk-setup enable
```

**æ‰‹å‹•æ›è¼‰ (å¦‚æœè‡ªå‹•æ›è¼‰å¤±æ•—)**
```bash
# ä½¿ç”¨ç®¡ç†å·¥å…· (æ¨è–¦)
ctdisk mount

# æˆ–ä½¿ç”¨å¿«é€Ÿåˆ¥å
mount-ct

# æª¢æŸ¥æ›è¼‰ç‹€æ…‹
ctdisk status
```

**ä¼‘çœ /é‡å•Ÿå¾Œæ›è¼‰å•é¡Œè¨ºæ–·**
```bash
# 1. æª¢æŸ¥ç³»çµ±æ˜¯å¦åµæ¸¬åˆ°ç¡¬ç¢Ÿ
diskutil list | grep CTExternalDisk

# 2. æª¢æŸ¥è¨­å‚™ç¯€é»æ˜¯å¦å­˜åœ¨
ls -la /dev/disk*s1 | grep CTExternalDisk

# 3. æª¢æŸ¥æœå‹™æ—¥èªŒä¸­çš„ä¼‘çœ /é‡å•Ÿäº‹ä»¶
ctdisk-setup logs | grep -E "(BOOT|restarted|hibernation|Wake)"

# 4. æ‰‹å‹•è§¸ç™¼é–‹æ©Ÿæ›è¼‰è…³æœ¬
ctdisk-setup test-boot

# 5. æª¢æŸ¥ç¬¦è™Ÿé€£çµç‹€æ…‹
ls -la ~/Music/iTunes
```

**è¨­å‚™ç¯€é»è®Šæ›´å•é¡Œ (ä¼‘çœ å¾Œå¸¸è¦‹)**
```bash
# æª¢æŸ¥ç•¶å‰è¨­å‚™ç¯€é»
diskutil info 3E314969-A8AD-49EA-8743-F773357E61AB | grep "Device Node"

# å¦‚æœè¨­å‚™ç¯€é»è®Šæ›´ï¼Œå¢å¼·ç‰ˆè…³æœ¬æœƒè‡ªå‹•è™•ç†
# æŸ¥çœ‹æ—¥èªŒç¢ºèªè‡ªå‹•åµæ¸¬æ˜¯å¦æ­£å¸¸
ctdisk-setup logs | grep "Device node changed"
```

### ç¡¬ç¢Ÿç„¡æ³•æ›è¼‰

**å¸¸è¦‹å•é¡Œï¼šdiskutil mount å¤±æ•—**
```bash
# æª¢æŸ¥ç¡¬ç¢Ÿæ˜¯å¦è¢«ç³»çµ±è­˜åˆ¥
diskutil list | grep CTExternalDisk

# æª¢æŸ¥ç¡¬ç¢Ÿè©³ç´°ç‹€æ…‹
diskutil info /dev/disk7s1

# æª¢æŸ¥ APFS å®¹å™¨ç‹€æ…‹
diskutil apfs list | grep -A 20 CTExternalDisk
```

**è§£æ±ºæ–¹æ¡ˆï¼ˆæŒ‰å„ªå…ˆé †åºå˜—è©¦ï¼‰ï¼š**

1. **ä½¿ç”¨ mount æŒ‡ä»¤ï¼ˆæœ€å¯é ï¼‰ï¼š**
```bash
sudo mkdir -p /Volumes/CTExternalDisk
sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk
```

2. **æª¢æŸ¥æª”æ¡ˆç³»çµ±å®Œæ•´æ€§ï¼š**
```bash
sudo diskutil verifyVolume /dev/disk7s1
```

3. **å¼·åˆ¶æ›è¼‰ï¼ˆå¦‚æœä¸Šè¿°æ–¹æ³•å¤±æ•—ï¼‰ï¼š**
```bash
sudo diskutil mount /dev/disk7s1
```

4. **ä¿®å¾©ç¡¬ç¢Ÿï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰ï¼š**
```bash
diskutil repairVolume /Volumes/CTExternalDisk
```

### ç¬¦è™Ÿé€£çµå¤±æ•ˆ
```bash
# æª¢æŸ¥ç¬¦è™Ÿé€£çµç‹€æ…‹
ls -la ~/Music/iTunes

# é‡æ–°å»ºç«‹ç¬¦è™Ÿé€£çµ
rm ~/Music/iTunes
ln -s /Volumes/CTExternalDisk/Music_Library/iTunes ~/Music/iTunes
```

### æ¬Šé™å•é¡Œ
```bash
# ä¿®å¾©æ¬Šé™
sudo chown -R $(whoami):staff /Volumes/CTExternalDisk
chmod -R 755 /Volumes/CTExternalDisk
```

### ç¡¬ç¢ŸåŠ å¯†å•é¡Œ
```bash
# æª¢æŸ¥åŠ å¯†ç‹€æ…‹
diskutil apfs list | grep -A 10 CTExternalDisk

# å¦‚æœç¡¬ç¢Ÿè¢«é–å®šï¼Œè§£é–ç¡¬ç¢Ÿ
diskutil apfs unlockVolume /dev/disk7s1
```

---

## ğŸ“ ç·Šæ€¥è¯çµ¡è³‡è¨Š

### ğŸ›¡ï¸ ä¼‘çœ å®‰å…¨å¿«é€ŸæŒ‡ä»¤åƒè€ƒ (æœ€æ–°æ¨è–¦ v2.0)

**ä¼‘çœ å®‰å…¨ç®¡ç† (ENHANCED!)**
```bash
# å®Œæ•´ä¼‘çœ å®‰å…¨ç³»çµ±
ctdisk-hibernation-safe setup-hibernation    # é©—è­‰ä¼‘çœ å®‰å…¨è¨­å®š
ctdisk-hibernation-safe check-sudo           # æª¢æŸ¥ç„¡å¯†ç¢¼ sudo é…ç½®
ctdisk-hibernation-safe test-sleep           # æ¸¬è©¦ä¼‘çœ å®‰å…¨å½ˆå‡º
ctdisk-hibernation-safe test-wake            # æ¸¬è©¦å–šé†’é‡æ–°æ›è¼‰

# æ‰‹å‹•ä¼‘çœ å®‰å…¨æ“ä½œ
ctdisk-hibernation-safe sleep-safe           # ä¼‘çœ å‰æ‰‹å‹•å®‰å…¨å½ˆå‡º
ctdisk-hibernation-safe wake-mount           # å–šé†’å¾Œæ‰‹å‹•é‡æ–°æ›è¼‰

# ç¡¬ç¢Ÿç®¡ç† (èˆ‡åŸç‰ˆç›¸åŒ)
ctdisk-hibernation-safe mount                # æ™ºèƒ½æ›è¼‰ç¡¬ç¢Ÿ
ctdisk-hibernation-safe unmount              # å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿ
ctdisk-hibernation-safe status               # æª¢æŸ¥æ›è¼‰ç‹€æ…‹å’Œç©ºé–“
ctdisk-hibernation-safe check                # æª¢æŸ¥ç¡¬ç¢Ÿå¥åº·ç‹€æ…‹

# ä¼‘çœ æ¢å¾©æ¸¬è©¦ (NEW!)
test-hibernation-recovery.sh                 # å®Œæ•´ä¼‘çœ æ¢å¾©æ¸¬è©¦

# æ¬Šé™ä¿®å¾©å·¥å…· (NEW!)
fix-ctdisk-ownership.sh                      # ä¿®å¾©æ›è¼‰é»æ¬Šé™å•é¡Œ
```

**ä¼‘çœ å®‰å…¨æ—¥èªŒç›£æ§ (ENHANCED!)**
```bash
# æŸ¥çœ‹ä¼‘çœ å®‰å…¨æ“ä½œæ—¥èªŒ
tail -f ~/.local/log/ctexternaldisk-sleepwake-v2.log

# æŸ¥çœ‹ä¼‘çœ å®‰å…¨æ›è¼‰æ—¥èªŒ (NEW!)
tail -f ~/.local/log/ctexternaldisk-mount-hibernation-safe.log

# æŸ¥çœ‹æœ€è¿‘çš„ä¼‘çœ /å–šé†’äº‹ä»¶
grep -E "(SLEEP|WAKE)" ~/.local/log/ctexternaldisk-sleepwake-v2.log | tail -10

# æŸ¥çœ‹ä¼‘çœ æ¢å¾©äº‹ä»¶ (NEW!)
grep "HIBERNATION" ~/.local/log/ctexternaldisk-mount-hibernation-safe.log | tail -10
```

**ç„¡å¯†ç¢¼ sudo ç®¡ç†**
```bash
# è¨­å®šç„¡å¯†ç¢¼ sudo (ä¸€æ¬¡æ€§è¨­å®š)
/Users/ctyeh/.local/bin/setup-sudoless-mount.sh

# ç§»é™¤ç„¡å¯†ç¢¼ sudo (å¦‚éœ€è¦)
sudo rm /etc/sudoers.d/ctexternaldisk-mount
```

**ç·Šæ€¥æ‰‹å‹•æ›è¼‰ (å¦‚æœæ‰€æœ‰è‡ªå‹•ç³»çµ±éƒ½å¤±æ•ˆ) (NEW!)**
```bash
# æ–¹æ³•1: ä½¿ç”¨ diskutil
sudo diskutil mount disk7s1

# æ–¹æ³•2: ä½¿ç”¨ mount æŒ‡ä»¤
sudo mkdir -p /Volumes/CTExternalDisk
sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk

# æ–¹æ³•3: ä½¿ç”¨ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬
/Users/ctyeh/.local/bin/mount-ctexternaldisk-hibernation-safe.sh

# ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
rm -f ~/Music/iTunes
ln -sf /Volumes/CTExternalDisk/Music_Library/iTunes ~/Music/iTunes

# ä¿®å¾©æ›è¼‰é»æ¬Šé™ (NEW!)
sudo chown ctyeh:staff /Volumes/CTExternalDisk
```

### ğŸš€ å¢å¼·ç‰ˆå¿«é€ŸæŒ‡ä»¤åƒè€ƒ (å‚³çµ±æ–¹æ³•)

**å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰ç®¡ç†**
```bash
# å•Ÿç”¨/åœç”¨å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰ (é›™æœå‹™æ¶æ§‹)
ctdisk-setup enable      # å•Ÿç”¨ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™
ctdisk-setup disable     # åœç”¨æ‰€æœ‰è‡ªå‹•æ›è¼‰æœå‹™
ctdisk-setup restart     # é‡å•Ÿæ‰€æœ‰æœå‹™
ctdisk-setup status      # æª¢æŸ¥é›™æœå‹™ç‹€æ…‹

# æ¸¬è©¦èˆ‡è¨ºæ–·
ctdisk-setup test        # æ¸¬è©¦ä¸»æ›è¼‰è…³æœ¬
ctdisk-setup test-boot   # æ¸¬è©¦é–‹æ©Ÿæ›è¼‰è…³æœ¬ (ä¼‘çœ /é‡å•Ÿæƒ…æ³)
ctdisk-setup logs        # æŸ¥çœ‹è©³ç´°æ—¥èªŒ (åŒ…å«ä¼‘çœ /é‡å•Ÿäº‹ä»¶)

# ç¡¬ç¢Ÿç®¡ç†
ctdisk mount             # æ™ºèƒ½æ›è¼‰ç¡¬ç¢Ÿ (å¤šé‡æ–¹æ³•)
ctdisk unmount           # å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿ
ctdisk status            # æª¢æŸ¥æ›è¼‰ç‹€æ…‹å’Œç©ºé–“
ctdisk check             # æª¢æŸ¥ç¡¬ç¢Ÿå¥åº·ç‹€æ…‹

# å¿«é€Ÿåˆ¥å
mount-ct                 # å¿«é€Ÿæ›è¼‰
unmount-ct               # å¿«é€Ÿå¸è¼‰
status-ct                # å¿«é€Ÿç‹€æ…‹æª¢æŸ¥
```

**ä¼‘çœ /é‡å•Ÿç‰¹æ®Šæƒ…æ³è™•ç†**
```bash
# ä¼‘çœ å–šé†’å¾Œå¦‚éœ€æ‰‹å‹•è§¸ç™¼
ctdisk-setup test-boot   # æ¨¡æ“¬é–‹æ©Ÿæ›è¼‰éç¨‹

# æª¢æŸ¥ä¼‘çœ /é‡å•Ÿç›¸é—œæ—¥èªŒ
ctdisk-setup logs | grep -E "(BOOT|restarted|hibernation)"

# é‡å•Ÿæœå‹™ (å¦‚æœä¼‘çœ å¾Œæœ‰å•é¡Œ)
ctdisk-setup restart
```

### é‡è¦æŒ‡ä»¤å¿«é€Ÿåƒè€ƒ (å‚³çµ±æ–¹æ³•)
```bash
# æ›è¼‰ç¡¬ç¢Ÿï¼ˆè§£å¯†å¾Œæ¨è–¦æ–¹æ³•ï¼‰
sudo mkdir -p /Volumes/CTExternalDisk
sudo mount -t apfs /dev/disk7s1 /Volumes/CTExternalDisk

# å‚™ç”¨æ›è¼‰æ–¹æ³•
sudo diskutil mount /dev/disk7s1

# æª¢æŸ¥ç¡¬ç¢Ÿç‹€æ…‹
diskutil info /dev/disk7s1

# æª¢æŸ¥ç©ºé–“
df -h /Volumes/CTExternalDisk

# å®‰å…¨å½ˆå‡º
diskutil eject /Volumes/CTExternalDisk
```

### ç³»çµ±é‚„åŸ
å¦‚æœéœ€è¦é‚„åŸåŸå§‹è¨­å®šï¼š
1. åˆªé™¤ç¬¦è™Ÿé€£çµï¼š`rm ~/Music/iTunes`
2. å¾å¤–æ¥ç¡¬ç¢Ÿè¤‡è£½æª”æ¡ˆå›å…§å»ºå„²å­˜
3. ç§»é™¤è‡ªå‹•æ›è¼‰è¨­å®šï¼š`sudo rm /etc/fstab`
4. ç§»é™¤ç„¡å¯†ç¢¼ sudo è¨­å®šï¼š`sudo rm /etc/sudoers.d/ctexternaldisk-mount` (NEW!)

---

## ğŸ›¡ï¸ ä¼‘çœ å®‰å…¨ä¿è­·

### ä¼‘çœ å°å¤–æ¥ç¡¬ç¢Ÿçš„å½±éŸ¿
- **âœ… ç¡¬ç¢Ÿå®‰å…¨**: ç¾ä»£ macOS ä¼‘çœ æ©Ÿåˆ¶å° APFS æª”æ¡ˆç³»çµ±å®‰å…¨
- **âœ… ç„¡æª”æ¡ˆæå£**: ç³»çµ±æœƒåœ¨ä¼‘çœ å‰åŒæ­¥æ‰€æœ‰å¾…å¯«å…¥è³‡æ–™
- **âœ… è‡ªå‹•æ¢å¾©**: å–šé†’å¾Œç³»çµ±æœƒè‡ªå‹•é‡æ–°è­˜åˆ¥ USB è¨­å‚™
- **âš ï¸ è¨­å‚™ç¯€é»è®Šæ›´**: ä¼‘çœ å¾Œè¨­å‚™ç¯€é»å¯èƒ½æ”¹è®Š (å¦‚ disk7s1 â†’ disk8s1)

### ä¼‘çœ å®‰å…¨ç³»çµ±ä¿è­·æ©Ÿåˆ¶
1. **ä¼‘çœ å‰è‡ªå‹•å½ˆå‡º**: é˜²æ­¢ä»»ä½•æ½›åœ¨çš„æª”æ¡ˆç³»çµ±å•é¡Œ
2. **å–šé†’å¾Œè‡ªå‹•æ›è¼‰**: ç„¡éœ€æ‰‹å‹•é‡æ–°é€£æ¥
3. **è¨­å‚™ç¯€é»è¿½è¹¤**: è‡ªå‹•è™•ç†è¨­å‚™ç¯€é»è®Šæ›´
4. **ç¬¦è™Ÿé€£çµç¶­è­·**: ç¢ºä¿ iTunes ç­‰æ‡‰ç”¨ç¨‹å¼æ­£å¸¸é‹ä½œ
5. **ç„¡å¯†ç¢¼æ“ä½œ**: å®Œå…¨è‡ªå‹•åŒ–ï¼Œç„¡éœ€ä½¿ç”¨è€…å¹²é 

### ä¼‘çœ å®‰å…¨æœ€ä½³å¯¦è¸
- **âœ… ä½¿ç”¨ä¼‘çœ å®‰å…¨ç³»çµ±**: å·²è‡ªå‹•é…ç½®ï¼Œç„¡éœ€é¡å¤–æ“ä½œ
- **âœ… å®šæœŸæª¢æŸ¥æ—¥èªŒ**: `tail -f ~/.local/log/ctexternaldisk-sleepwake-v2.log`
- **âœ… æ¸¬è©¦ä¼‘çœ é€±æœŸ**: å®šæœŸåŸ·è¡Œ `ctdisk-hibernation-safe test-sleep && ctdisk-hibernation-safe test-wake`
- **âœ… ä¿æŒç³»çµ±æ›´æ–°**: ç¢ºä¿ macOS å’Œè…³æœ¬éƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬

---

## ğŸ“ æ›´æ–°è¨˜éŒ„

- **2025-08-07**: åˆå§‹è¨­å®šå®Œæˆ
  - å»ºç«‹ iTunes ç¬¦è™Ÿé€£çµ
  - ç§»å‹• Downloads å…§å®¹åˆ°å¤–æ¥ç¡¬ç¢Ÿ
  - è¨­å®šè‡ªå‹•æ›è¼‰ï¼ˆfstab + LaunchDaemonï¼‰
  - è¨­å®šå…§å»ºå„²å­˜ä½œç‚ºç³»çµ±ç…§ç‰‡åœ–åº«

- **2025-08-08**: è§£å¯†å®Œæˆ
  - æˆåŠŸç§»é™¤ FileVault åŠ å¯†
  - è§£å¯†éç¨‹é †åˆ©ï¼Œç„¡è³‡æ–™éºå¤±
  - ç¡¬ç¢Ÿæ›è¼‰æ›´åŠ ç©©å®šå¯é 
  - æ•ˆèƒ½ç•¥æœ‰æå‡ï¼Œä½¿ç”¨æ›´ä¾¿åˆ©

- **2025-08-08**: æ™ºèƒ½è‡ªå‹•æ›è¼‰ç³»çµ±éƒ¨ç½² ğŸš€
  - å»ºç«‹å®Œæ•´çš„ LaunchAgent è‡ªå‹•æ›è¼‰æœå‹™
  - éƒ¨ç½²æ™ºèƒ½æ›è¼‰è…³æœ¬ï¼Œæ”¯æ´å¤šç¨®æ›è¼‰æ–¹æ³•
  - å»ºç«‹ `ctdisk` å’Œ `ctdisk-setup` ç®¡ç†å·¥å…·
  - æ–°å¢å¿«é€Ÿåˆ¥åï¼š`mount-ct`, `unmount-ct`, `status-ct`
  - å¯¦ç¾æ—¥èªŒç³»çµ±ï¼Œä¾¿æ–¼æ•…éšœæ’é™¤
  - è‡ªå‹•é©—è­‰ç¬¦è™Ÿé€£çµç‹€æ…‹
  - **çµæœ**: ç„¡éœ€æ‰‹å‹•åŸ·è¡Œæ›è¼‰æŒ‡ä»¤ï¼Œç¡¬ç¢Ÿé€£æ¥å¾Œè‡ªå‹•æ›è¼‰

- **2025-08-09**: å¢å¼·ç‰ˆè‡ªå‹•æ›è¼‰ç³»çµ± - ä¼‘çœ èˆ‡é‡å•Ÿå®Œç¾æ”¯æ´ ğŸ”„
  - **é›™æœå‹™æ¶æ§‹**: ä¸»æœå‹™ + é–‹æ©Ÿæœå‹™ï¼Œç¢ºä¿æ‰€æœ‰æƒ…æ³ä¸‹éƒ½èƒ½è‡ªå‹•æ›è¼‰
  - **ä¼‘çœ /é‡å•Ÿåµæ¸¬**: æ™ºèƒ½åµæ¸¬ç³»çµ±ç‹€æ…‹ï¼Œè‡ªå‹•ç­‰å¾…ç³»çµ±å®Œå…¨å°±ç·’
  - **å‹•æ…‹è¨­å‚™åµæ¸¬**: è™•ç†ä¼‘çœ å¾Œè¨­å‚™ç¯€é»è®Šæ›´ï¼Œè‡ªå‹•å°‹æ‰¾æ­£ç¢ºçš„è¨­å‚™è·¯å¾‘
  - **å¼·åŒ–æ›è¼‰é‚è¼¯**: å¤šé‡æ›è¼‰æ–¹æ³•ï¼Œ3æ¬¡é‡è©¦æ©Ÿåˆ¶ï¼Œ5ç§’é–“éš”
  - **ç¬¦è™Ÿé€£çµè‡ªå‹•ä¿®å¾©**: è‡ªå‹•é©—è­‰ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
  - **é–å®šæª”æ¡ˆç³»çµ±**: é˜²æ­¢å¤šå€‹å¯¦ä¾‹è¡çª
  - **å¢å¼·æ—¥èªŒç³»çµ±**: è©³ç´°è¨˜éŒ„ç³»çµ±ç‹€æ…‹ã€æ›è¼‰éç¨‹å’ŒéŒ¯èª¤è³‡è¨Š
  - **é–‹æ©Ÿæ™‚ç«‹å³æ›è¼‰**: ç™»å…¥å¾Œç«‹å³å˜—è©¦æ›è¼‰ï¼Œæœ€å¤šç­‰å¾…2åˆ†é˜
  - **æ–°å¢æ¸¬è©¦å·¥å…·**: `ctdisk-setup test-boot`, `ctdisk-setup restart`
  - **çµæœ**: å®Œç¾æ”¯æ´ä¼‘çœ å–šé†’å’Œç³»çµ±é‡å•Ÿï¼Œç„¡éœ€ä»»ä½•æ‰‹å‹•æ“ä½œ âœ…

- **2025-08-11**: ä¼‘çœ å®‰å…¨æ™ºèƒ½è‡ªå‹•æ›è¼‰ç³»çµ± - å®Œå…¨è‡ªå‹•åŒ–ä¼‘çœ è™•ç† ğŸ›¡ï¸
  - **ä¼‘çœ å®‰å…¨è™•ç†**: ç³»çµ±ä¼‘çœ å‰è‡ªå‹•å®‰å…¨å½ˆå‡ºç¡¬ç¢Ÿï¼Œé˜²æ­¢æª”æ¡ˆç³»çµ±æå£
  - **å–šé†’è‡ªå‹•æ›è¼‰**: ç³»çµ±å–šé†’å¾Œè‡ªå‹•é‡æ–°æ›è¼‰ç¡¬ç¢Ÿï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ
  - **ç„¡å¯†ç¢¼ sudo é…ç½®**: è¨­å®šå®‰å…¨çš„ sudoers è¦å‰‡ï¼Œå¯¦ç¾å®Œå…¨è‡ªå‹•åŒ–æ“ä½œ
  - **ä¼‘çœ å®‰å…¨è…³æœ¬**: `ctdisk-sleepwatcher-v2.sh` è™•ç†ä¼‘çœ /å–šé†’äº‹ä»¶
  - **ä¼‘çœ å®‰å…¨ç®¡ç†å·¥å…·**: `ctdisk-hibernation-safe` å®Œæ•´çš„ä¼‘çœ å®‰å…¨ç®¡ç†
  - **ä¸€éµè¨­å®šå·¥å…·**: `setup-sudoless-mount.sh` è‡ªå‹•é…ç½®ç„¡å¯†ç¢¼ sudo
  - **å°ˆç”¨ä¼‘çœ æ—¥èªŒ**: è©³ç´°è¨˜éŒ„ä¼‘çœ /å–šé†’æ“ä½œå’Œç‹€æ…‹
  - **è¨­å‚™ç¯€é»è¿½è¹¤**: è™•ç†ä¼‘çœ å¾Œè¨­å‚™ç¯€é»è®Šæ›´ (å¦‚ disk7s1 â†’ disk8s1)
  - **iTunes ç¬¦è™Ÿé€£çµç¶­è­·**: ä¼‘çœ å¾Œè‡ªå‹•é©—è­‰ä¸¦ä¿®å¾©ç¬¦è™Ÿé€£çµ
  - **å®Œæ•´æ¸¬è©¦å¥—ä»¶**: ä¼‘çœ é€±æœŸæ¨¡æ“¬æ¸¬è©¦å’Œæ•…éšœæ’é™¤å·¥å…·
  - **å®‰å…¨æ€§ä¿è­‰**: é™åˆ¶ç¯„åœçš„ sudoers è¦å‰‡ï¼Œåƒ…å…è¨±ç‰¹å®šæ›è¼‰æ“ä½œ
  - **çµæœ**: å®Œå…¨è‡ªå‹•åŒ–çš„ä¼‘çœ å®‰å…¨è™•ç†ï¼Œç„¡éœ€ä»»ä½•æ‰‹å‹•å¹²é  ğŸ‰

- **2025-08-12**: ä¼‘çœ å®‰å…¨è‡ªå‹•æ›è¼‰ç³»çµ± v2.0 - å®Œç¾è§£æ±ºä¼‘çœ æ¢å¾©å•é¡Œ ğŸ›¡ï¸âœ¨
  - **ä¼‘çœ æ¢å¾©åµæ¸¬ç³»çµ±**: è‡ªå‹•åµæ¸¬ç³»çµ±å¾ä¼‘çœ ä¸­æ¢å¾©ï¼Œå•Ÿç”¨å¢å¼·æ›è¼‰æ¨¡å¼
  - **ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬**: å°ˆé–€è™•ç†ä¼‘çœ æ¢å¾©çš„å¢å¼·æ›è¼‰è…³æœ¬ (`mount-ctexternaldisk-hibernation-safe.sh`)
  - **ä¸‰é‡æ›è¼‰å‚™æ´**: diskutil â†’ sudo diskutil â†’ sudo mount ç¢ºä¿æ›è¼‰æˆåŠŸ
  - **æ™ºèƒ½ç­‰å¾…ç­–ç•¥**: ä¼‘çœ å¾Œå»¶é•·ç­‰å¾…æ™‚é–“ï¼Œç¢ºä¿ USB è¨­å‚™å®Œå…¨å°±ç·’
  - **è‡ªå‹•ä¿®å¾©æ©Ÿåˆ¶**: ä¼‘çœ å¾Œè‡ªå‹•æª¢æŸ¥ä¸¦ä¿®å¾© iTunes ç¬¦è™Ÿé€£çµ
  - **è‡ªå‹•æ¬Šé™ä¿®å¾©**: æ¯æ¬¡æ›è¼‰è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ç‚ºç”¨æˆ¶æ‰€æœ‰ (NEW!)
  - **æ¬Šé™ä¿®å¾©å·¥å…·**: `fix-ctdisk-ownership.sh` å°ˆç”¨æ¬Šé™ä¿®å¾©å·¥å…· (NEW!)
  - **å¯«å…¥æ¬Šé™ä¿è­‰**: ç¢ºä¿ç”¨æˆ¶å°å¤–æ¥ç¡¬ç¢Ÿå…·æœ‰å®Œæ•´è®€å¯«æ¬Šé™ (NEW!)
  - **ä¼‘çœ æ¢å¾©æ¸¬è©¦å·¥å…·**: `test-hibernation-recovery.sh` å®Œæ•´æ¸¬è©¦ä¼‘çœ æ¢å¾©æµç¨‹
  - **å¢å¼·æ—¥èªŒç³»çµ±**: å°ˆç”¨ä¼‘çœ å®‰å…¨æ›è¼‰æ—¥èªŒï¼Œè©³ç´°è¨˜éŒ„ä¼‘çœ æ¢å¾©äº‹ä»¶
  - **æœå‹™æ•´åˆå‡ç´š**: ä¸»æœå‹™ä½¿ç”¨ä¼‘çœ å®‰å…¨æ›è¼‰è…³æœ¬ï¼Œæä¾›æ›´å¯é çš„æ›è¼‰
  - **æ•…éšœæ’é™¤å¢å¼·**: æ–°å¢ä¼‘çœ æ¢å¾©å°ˆç”¨è¨ºæ–·å’Œä¿®å¾©æŒ‡ä»¤
  - **ç·Šæ€¥æ‰‹å‹•æ›è¼‰**: å¤šç¨®æ‰‹å‹•æ›è¼‰æ–¹æ³•ï¼Œæ‡‰å°æ¥µç«¯æƒ…æ³
  - **è‡ªå‹•æ¬Šé™ä¿®å¾©**: æ¯æ¬¡æ›è¼‰è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ç‚ºç”¨æˆ¶æ‰€æœ‰ (NEW!)
  - **æ¬Šé™ä¿®å¾©å·¥å…·**: `fix-ctdisk-ownership.sh` å°ˆç”¨æ¬Šé™ä¿®å¾©å·¥å…· (NEW!)
  - **å¯«å…¥æ¬Šé™ä¿è­‰**: è§£æ±ºæ›è¼‰é» root æ¬Šé™å•é¡Œï¼Œç¢ºä¿ç”¨æˆ¶å®Œæ•´è®€å¯«æ¬Šé™ (NEW!)
  - **çµæœ**: å®Œç¾è§£æ±ºä¼‘çœ å¾Œè‡ªå‹•æ›è¼‰å¤±æ•ˆå•é¡Œï¼Œå¯¦ç¾çœŸæ­£çš„å…¨è‡ªå‹•åŒ– ğŸ‰

---

*æœ€å¾Œæ›´æ–°: 2025å¹´8æœˆ12æ—¥*
*å»ºç«‹è€…: Amazon Q*
*å¢å¼·ç‰ˆæ™ºèƒ½è‡ªå‹•æ›è¼‰ç³»çµ±: å·²éƒ¨ç½² âœ…*
*ä¼‘çœ /é‡å•Ÿæ”¯æ´: å®Œç¾é‹ä½œ ğŸ”„*
*ä¼‘çœ å®‰å…¨ç³»çµ± v2.0: å®Œç¾è§£æ±ºä¼‘çœ æ¢å¾©å•é¡Œ ğŸ›¡ï¸âœ¨*
*æ¬Šé™ç®¡ç†ç³»çµ±: è‡ªå‹•ä¿®å¾©æ›è¼‰é»æ¬Šé™ ğŸ‘¤âœ¨*
